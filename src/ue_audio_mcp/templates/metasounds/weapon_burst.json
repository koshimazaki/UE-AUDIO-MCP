{
  "name": "Weapon Burst Fire",
  "asset_type": "Source",
  "description": "Burst-fire weapon system from Craig Owen tutorial. OnPlay starts a Trigger Repeat at BurstRate, feeding a Trigger Sequence that round-robins across 3 MSP_RandomizationNode layers (each with its own WaveAsset array for per-shot pitch/volume variation). Trigger Counter tracks shot count and stops the burst after BurstCount shots via Trigger Compare. Stereo Mixer combines all 3 layers. Use weapon_source.json for room reverb and distance tails on top of this.",
  "author": "Craig Owen (YAGER Development)",
  "source_url": "https://www.youtube.com/watch?v=n5z4L43jMi8",
  "interfaces": [
    "UE.Source.OneShot"
  ],
  "inputs": [
    {
      "name": "OnPlay",
      "type": "Trigger"
    },
    {
      "name": "BurstRate",
      "type": "Time",
      "default": 0.08,
      "description": "Time between shots in seconds (0.08 = 750 RPM)"
    },
    {
      "name": "BurstCount",
      "type": "Int32",
      "default": 3,
      "description": "Number of shots per burst (3 = 3-round burst)"
    },
    {
      "name": "WaveAsset_Layer0",
      "type": "WaveAsset[]",
      "description": "Shot layer 0 wave variations (e.g. close mech)"
    },
    {
      "name": "WaveAsset_Layer1",
      "type": "WaveAsset[]",
      "description": "Shot layer 1 wave variations (e.g. body punch)"
    },
    {
      "name": "WaveAsset_Layer2",
      "type": "WaveAsset[]",
      "description": "Shot layer 2 wave variations (e.g. transient crack)"
    },
    {
      "name": "Pitch_RandomMin",
      "type": "Float",
      "default": -0.05,
      "description": "Min pitch offset (semitones) per shot"
    },
    {
      "name": "Pitch_RandomMax",
      "type": "Float",
      "default": 0.05,
      "description": "Max pitch offset (semitones) per shot"
    },
    {
      "name": "Volume_Master",
      "type": "Float",
      "default": 1.0,
      "description": "Master volume for all layers"
    }
  ],
  "outputs": [
    {
      "name": "OnFinished",
      "type": "Trigger"
    },
    {
      "name": "Out Left",
      "type": "Audio"
    },
    {
      "name": "Out Right",
      "type": "Audio"
    }
  ],
  "nodes": [
    {
      "id": "burst_repeat",
      "node_type": "Trigger Repeat",
      "position": [
        200,
        0
      ],
      "comment": "Generates rapid fire triggers at BurstRate interval. Started by OnPlay, stopped by burst_stop."
    },
    {
      "id": "shot_counter",
      "node_type": "Trigger Counter",
      "position": [
        400,
        200
      ],
      "defaults": {
        "Reset Count": 0
      },
      "comment": "Counts each shot. Count output compared against BurstCount to stop the burst."
    },
    {
      "id": "burst_compare",
      "node_type": "Trigger Compare (Int32)",
      "position": [
        600,
        200
      ],
      "defaults": {
        "B": 3
      },
      "comment": "When shot_counter.Count >= BurstCount, fires True to stop the repeater"
    },
    {
      "id": "trigger_seq",
      "node_type": "Trigger Sequence",
      "position": [
        400,
        0
      ],
      "defaults": {
        "Loop": true
      },
      "comment": "Round-robins each shot trigger across 3 layers (Out 0, Out 1, Out 2)"
    },
    {
      "id": "layer_0",
      "node_type": "MSP_RandomizationNode",
      "position": [
        700,
        -200
      ],
      "comment": "Layer 0: close mech / transient. Per-shot pitch and volume randomization."
    },
    {
      "id": "layer_1",
      "node_type": "MSP_RandomizationNode",
      "position": [
        700,
        0
      ],
      "comment": "Layer 1: body punch / mid. Per-shot pitch and volume randomization."
    },
    {
      "id": "layer_2",
      "node_type": "MSP_RandomizationNode",
      "position": [
        700,
        200
      ],
      "comment": "Layer 2: transient crack / tail. Per-shot pitch and volume randomization."
    },
    {
      "id": "stereo_mixer",
      "node_type": "Stereo Mixer",
      "position": [
        1000,
        0
      ],
      "defaults": {
        "Gain 0": 1.0,
        "Gain 1": 1.0,
        "Gain 2": 1.0
      },
      "comment": "Combines all 3 shot layers into stereo output"
    },
    {
      "id": "trigger_any",
      "node_type": "Trigger Any",
      "position": [
        1000,
        -200
      ],
      "comment": "OnFinished when last layer finishes"
    }
  ],
  "connections": [
    {
      "from_node": "__graph__",
      "from_pin": "OnPlay",
      "to_node": "burst_repeat",
      "to_pin": "Start"
    },
    {
      "from_node": "__graph__",
      "from_pin": "BurstRate",
      "to_node": "burst_repeat",
      "to_pin": "Period"
    },
    {
      "from_node": "__graph__",
      "from_pin": "OnPlay",
      "to_node": "shot_counter",
      "to_pin": "Reset"
    },
    {
      "from_node": "burst_repeat",
      "from_pin": "RepeatOut",
      "to_node": "trigger_seq",
      "to_pin": "In"
    },
    {
      "from_node": "burst_repeat",
      "from_pin": "RepeatOut",
      "to_node": "shot_counter",
      "to_pin": "In"
    },
    {
      "from_node": "shot_counter",
      "from_pin": "Count",
      "to_node": "burst_compare",
      "to_pin": "A"
    },
    {
      "from_node": "__graph__",
      "from_pin": "BurstCount",
      "to_node": "burst_compare",
      "to_pin": "B"
    },
    {
      "from_node": "burst_repeat",
      "from_pin": "RepeatOut",
      "to_node": "burst_compare",
      "to_pin": "Compare"
    },
    {
      "from_node": "burst_compare",
      "from_pin": "True",
      "to_node": "burst_repeat",
      "to_pin": "Stop"
    },
    {
      "from_node": "trigger_seq",
      "from_pin": "Out 0",
      "to_node": "layer_0",
      "to_pin": "Next"
    },
    {
      "from_node": "trigger_seq",
      "from_pin": "Out 1",
      "to_node": "layer_1",
      "to_pin": "Next"
    },
    {
      "from_node": "trigger_seq",
      "from_pin": "Out 2",
      "to_node": "layer_2",
      "to_pin": "Next"
    },
    {
      "from_node": "__graph__",
      "from_pin": "WaveAsset_Layer0",
      "to_node": "layer_0",
      "to_pin": "In Array"
    },
    {
      "from_node": "__graph__",
      "from_pin": "WaveAsset_Layer1",
      "to_node": "layer_1",
      "to_pin": "In Array"
    },
    {
      "from_node": "__graph__",
      "from_pin": "WaveAsset_Layer2",
      "to_node": "layer_2",
      "to_pin": "In Array"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Pitch_RandomMin",
      "to_node": "layer_0",
      "to_pin": "Pitch_RandomMin"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Pitch_RandomMax",
      "to_node": "layer_0",
      "to_pin": "Pitch_RandomMax"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Volume_Master",
      "to_node": "layer_0",
      "to_pin": "Volume_Master"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Pitch_RandomMin",
      "to_node": "layer_1",
      "to_pin": "Pitch_RandomMin"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Pitch_RandomMax",
      "to_node": "layer_1",
      "to_pin": "Pitch_RandomMax"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Volume_Master",
      "to_node": "layer_1",
      "to_pin": "Volume_Master"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Pitch_RandomMin",
      "to_node": "layer_2",
      "to_pin": "Pitch_RandomMin"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Pitch_RandomMax",
      "to_node": "layer_2",
      "to_pin": "Pitch_RandomMax"
    },
    {
      "from_node": "__graph__",
      "from_pin": "Volume_Master",
      "to_node": "layer_2",
      "to_pin": "Volume_Master"
    },
    {
      "from_node": "layer_0",
      "from_pin": "Out",
      "to_node": "stereo_mixer",
      "to_pin": "In 0 L"
    },
    {
      "from_node": "layer_1",
      "from_pin": "Out",
      "to_node": "stereo_mixer",
      "to_pin": "In 1 L"
    },
    {
      "from_node": "layer_2",
      "from_pin": "Out",
      "to_node": "stereo_mixer",
      "to_pin": "In 2 L"
    },
    {
      "from_node": "stereo_mixer",
      "from_pin": "Out L",
      "to_node": "__graph__",
      "to_pin": "Out Left"
    },
    {
      "from_node": "stereo_mixer",
      "from_pin": "Out R",
      "to_node": "__graph__",
      "to_pin": "Out Right"
    },
    {
      "from_node": "layer_0",
      "from_pin": "On Finished",
      "to_node": "trigger_any",
      "to_pin": "Trigger 0"
    },
    {
      "from_node": "layer_1",
      "from_pin": "On Finished",
      "to_node": "trigger_any",
      "to_pin": "Trigger 1"
    },
    {
      "from_node": "layer_2",
      "from_pin": "On Finished",
      "to_node": "trigger_any",
      "to_pin": "Trigger 2"
    },
    {
      "from_node": "trigger_any",
      "from_pin": "Trigger",
      "to_node": "__graph__",
      "to_pin": "OnFinished"
    }
  ]
}
